import{s as ie,e as te,i as A,d,f as $,a as M,g as T,h as I,c as U,u as W,j as w,C as V,v as S,x as K,z as be,t as he,p as me,y as j,k as ye,B as ke,A as G,J as He,l as x,m as ee,n as de,Q as ze,w as Ce,o as Ke,R as Ve,S as je}from"../chunks/scheduler.f5cfe514.js";import{S as ae,i as ce,g as ne,c as se,a as R,t as q,b as F,d as J,m as Q,e as X,f as re}from"../chunks/index.c2fc59c9.js";import{e as _e,u as Re,o as qe}from"../chunks/each.94f093eb.js";import{a as ge,s as Ee,K as We}from"../chunks/keymap-codes.fc236303.js";import{A as Ye,I as Fe}from"../chunks/ActionSelector.2ddb6b76.js";import{L as Be}from"../chunks/i18n-svelte.4af892db.js";import{a as $e}from"../chunks/title.f08fecde.js";import{c as le,C as oe,a as Te}from"../chunks/undo-redo.bbe346d2.js";import{d as we,w as Se}from"../chunks/index.c76aaf45.js";import{c as Ae,s as pe,d as Je}from"../chunks/index.085a7975.js";import{A as Qe}from"../chunks/Action.7d8e840a.js";function De(l,e,s){const n=l.slice();return n[2]=e[s],n[4]=s,n}function Oe(l,e){let s,n,o;return n=new Qe({props:{action:e[2],display:e[1]}}),{key:l,first:null,c(){s=te(),F(n.$$.fragment),this.h()},l(r){s=te(),J(n.$$.fragment,r),this.h()},h(){this.first=s},m(r,a){A(r,s,a),Q(n,r,a),o=!0},p(r,a){e=r;const t={};a&1&&(t.action=e[2]),a&2&&(t.display=e[1]),n.$set(t)},i(r){o||(R(n.$$.fragment,r),o=!0)},o(r){q(n.$$.fragment,r),o=!1},d(r){r&&d(s),X(n,r)}}}function Xe(l){let e=[],s=new Map,n,o,r=_e(l[0]);const a=t=>`${typeof t[2]=="number"?t[2]:t[2].code}:${t[4]}`;for(let t=0;t<r.length;t+=1){let i=De(l,r,t),c=a(i);s.set(c,e[t]=Oe(c,i))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=te()},l(t){for(let i=0;i<e.length;i+=1)e[i].l(t);n=te()},m(t,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,i);A(t,n,i),o=!0},p(t,[i]){i&3&&(r=_e(t[0]),ne(),e=Re(e,i,a,1,t,r,s,n.parentNode,qe,Oe,n,De),se())},i(t){if(!o){for(let i=0;i<r.length;i+=1)R(e[i]);o=!0}},o(t){for(let i=0;i<e.length;i+=1)q(e[i]);o=!1},d(t){t&&d(n);for(let i=0;i<e.length;i+=1)e[i].d(t)}}}function Ge(l,e,s){let{actions:n}=e,{display:o="inline-keys"}=e;return l.$$set=r=>{"actions"in r&&s(0,n=r.actions),"display"in r&&s(1,o=r.display)},[n,o]}class Me extends ae{constructor(e){super(),ce(this,e,Ge,Xe,ie,{actions:0,display:1})}}function Ze(l){let e;return{c(){e=$("div")},l(s){e=T(s,"DIV",{}),I(e).forEach(d)},m(s,n){A(s,e,n)},p:j,i:j,o:j,d(s){s&&d(e)}}}function xe(l){let e,s,n="add",o,r=`${l[3]}px 0`,a,t,i;return{c(){e=$("div"),s=$("button"),s.textContent=n,this.h()},l(c){e=T(c,"DIV",{class:!0});var v=I(e);s=T(v,"BUTTON",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-y90f9l"&&(s.textContent=n),v.forEach(d),this.h()},h(){w(s,"class","icon svelte-niexr"),w(e,"class","cursor svelte-niexr"),ye(e,"translate",r)},m(c,v){A(c,e,v),S(e,s),l[8](s),a=!0,t||(i=K(s,"click",l[7]),t=!0)},p(c,v){v&8&&r!==(r=`${c[3]}px 0`)&&ye(e,"translate",r)},i(c){a||(c&&ke(()=>{a&&(o||(o=re(e,Ae,{},!0)),o.run(1))}),a=!0)},o(c){c&&(o||(o=re(e,Ae,{},!1)),o.run(0)),a=!1},d(c){c&&d(e),l[8](null),c&&o&&o.end(),t=!1,i()}}}function et(l){let e,s,n,o,r,a,t,i="•",c,v,m;const f=[xe,Ze],h=[];function k(g,y){return g[4]?0:1}return s=k(l),n=h[s]=f[s](l),r=new Me({props:{actions:l[0].phrase}}),{c(){e=$("div"),n.c(),o=M(),F(r.$$.fragment),a=M(),t=$("sup"),t.textContent=i,this.h()},l(g){e=T(g,"DIV",{role:!0,tabindex:!0,class:!0});var y=I(e);n.l(y),o=U(y),J(r.$$.fragment,y),a=U(y),t=T(y,"SUP",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-ouf49e"&&(t.textContent=i),y.forEach(d),this.h()},h(){w(t,"class","svelte-niexr"),w(e,"role","textbox"),w(e,"tabindex","0"),w(e,"class","svelte-niexr"),V(e,"edited",l[0].phrase.length!==0&&l[0].phraseChanged)},m(g,y){A(g,e,y),h[s].m(e,null),S(e,o),Q(r,e,null),S(e,a),S(e,t),l[9](e),c=!0,v||(m=[K(e,"keydown",l[5]),K(e,"mousedown",l[6]),K(e,"focusin",l[10]),K(e,"focusout",l[11])],v=!0)},p(g,[y]){let D=s;s=k(g),s===D?h[s].p(g,y):(ne(),q(h[D],1,1,()=>{h[D]=null}),se(),n=h[s],n?n.p(g,y):(n=h[s]=f[s](g),n.c()),R(n,1),n.m(e,o));const E={};y&1&&(E.actions=g[0].phrase),r.$set(E),(!c||y&1)&&V(e,"edited",g[0].phrase.length!==0&&g[0].phraseChanged)},i(g){c||(R(n),R(r.$$.fragment,g),c=!0)},o(g){q(n),q(r.$$.fragment,g),c=!1},d(g){g&&d(e),h[s].d(),X(r),l[9](null),v=!1,be(m)}}}function tt(l,e,s){let{chord:n}=e;function o(_){_.key==="ArrowUp"?c():_.key==="ArrowLeft"?r(f-1):_.key==="ArrowRight"?r(f+1):_.key==="Backspace"?(a(f-1),r(f-1)):_.key==="Delete"?a(f):ge.has(_.key)?(t(f,ge.get(_.key).code),he().then(()=>r(f+1))):Ee.has(_.key)&&(t(f,Ee.get(_.key)),he().then(()=>r(f+1)))}function r(_){f=Math.max(0,Math.min(_,n.phrase.length));const N=m.children.item(f);s(3,h=N.offsetLeft+N.offsetWidth)}function a(_,N=1){_ in n.phrase&&le.update(P=>(P.push({type:oe.Chord,id:n.id,actions:n.actions,phrase:n.phrase.toSpliced(_,N)}),P))}function t(_,N){le.update(P=>(P.push({type:oe.Chord,id:n.id,actions:n.actions,phrase:n.phrase.toSpliced(_,0,N)}),P))}function i(_){if(_.target===v)return;const N=_.layerX;let P=0;for(const L of m.children){const{offsetLeft:b,offsetWidth:u}=L;if(N<b+u/2){r(P-1);return}P++}r(P-1)}function c(){const _=new Ye({target:document.body}),N=document.querySelector("dialog > div"),P=document.querySelector("dialog"),L=N.getBoundingClientRect(),b=v.getBoundingClientRect(),u=.5,p=`${1-u*(1-b.width/L.width)} ${1-u*(1-b.height/L.height)}`,z=`${u*(b.x-L.x)}px ${u*(b.y-L.y)}px`,Y={duration:150,easing:"ease"},C=N.animate([{scale:p,translate:z},{translate:"0 0",scale:"1"}],Y),B=P.animate([{opacity:0},{opacity:1}],Y);async function H(){C.reverse(),B.reverse(),await C.finished,_.$destroy(),await he(),m.focus()}_.$on("close",H),_.$on("select",({detail:ue})=>{t(f,ue),he().then(()=>r(f+1)),H()})}let v,m,f=0,h=0,k=!1;function g(_){me[_?"unshift":"push"](()=>{v=_,s(1,v)})}function y(_){me[_?"unshift":"push"](()=>{m=_,s(2,m)})}const D=()=>s(4,k=!0),E=_=>{_.relatedTarget!==v&&s(4,k=!1)};return l.$$set=_=>{"chord"in _&&s(0,n=_.chord)},[n,v,m,h,k,o,i,c,g,y,D,E]}class nt extends ae{constructor(e){super(),ce(this,e,tt,et,ie,{chord:0})}}function st(l){let e,s=l[3].configure.chords.NEW_CHORD()+"",n;return{c(){e=$("span"),n=x(s),this.h()},l(o){e=T(o,"SPAN",{class:!0});var r=I(e);n=ee(r,s),r.forEach(d),this.h()},h(){w(e,"class","svelte-162n6ps")},m(o,r){A(o,e,r),S(e,n)},p(o,r){r&8&&s!==(s=o[3].configure.chords.NEW_CHORD()+"")&&de(n,s)},d(o){o&&d(e)}}}function rt(l){let e,s=l[3].configure.chords.HOLD_KEYS()+"",n;return{c(){e=$("span"),n=x(s),this.h()},l(o){e=T(o,"SPAN",{class:!0});var r=I(e);n=ee(r,s),r.forEach(d),this.h()},h(){w(e,"class","svelte-162n6ps")},m(o,r){A(o,e,r),S(e,n)},p(o,r){r&8&&s!==(s=o[3].configure.chords.HOLD_KEYS()+"")&&de(n,s)},d(o){o&&d(e)}}}function lt(l){let e,s,n,o,r,a="•",t,i,c;function v(h,k){if(h[2]&&h[1].size===0)return rt;if(!h[2]&&!h[0])return st}let m=v(l),f=m&&m(l);return n=new Me({props:{display:"keys",actions:l[2]?[...l[1]].sort(Z):l[0]?.actions??[]}}),{c(){e=$("button"),f&&f.c(),s=M(),F(n.$$.fragment),o=M(),r=$("sup"),r.textContent=a,this.h()},l(h){e=T(h,"BUTTON",{class:!0});var k=I(e);f&&f.l(k),s=U(k),J(n.$$.fragment,k),o=U(k),r=T(k,"SUP",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-ouf49e"&&(r.textContent=a),k.forEach(d),this.h()},h(){w(r,"class","svelte-162n6ps"),w(e,"class","svelte-162n6ps"),V(e,"deleted",l[0]&&l[0].phrase.length===0),V(e,"edited",l[0]&&l[0].actionsChanged),V(e,"invalid",l[0]&&l[0].actions.toSorted(Z).some(l[7]))},m(h,k){A(h,e,k),f&&f.m(e,null),S(e,s),Q(n,e,null),S(e,o),S(e,r),t=!0,i||(c=[K(e,"click",l[4]),K(e,"keydown",l[5]),K(e,"keyup",l[6])],i=!0)},p(h,[k]){m===(m=v(h))&&f?f.p(h,k):(f&&f.d(1),f=m&&m(h),f&&(f.c(),f.m(e,s)));const g={};k&7&&(g.actions=h[2]?[...h[1]].sort(Z):h[0]?.actions??[]),n.$set(g),(!t||k&1)&&V(e,"deleted",h[0]&&h[0].phrase.length===0),(!t||k&1)&&V(e,"edited",h[0]&&h[0].actionsChanged),(!t||k&1)&&V(e,"invalid",h[0]&&h[0].actions.toSorted(Z).some(h[7]))},i(h){t||(R(n.$$.fragment,h),t=!0)},o(h){q(n.$$.fragment,h),t=!1},d(h){h&&d(e),f&&f.d(),X(n),i=!1,be(c)}}}function Z(l,e){return l-e}function ot(l,e,s){let n;G(l,Be,f=>s(3,n=f));let{chord:o=void 0}=e;const r=He();let a=new Set,t=!1;function i(){s(1,a=new Set),s(2,t=!0)}function c(f){t&&(f.preventDefault(),a.add(ge.get(f.key).code),s(1,a))}function v(){if(t&&(s(2,t=!1),!(a.size<2))){if(!o)return r("submit",[...a].sort(Z));le.update(f=>(f.push({type:oe.Chord,id:o.id,actions:[...a].sort(Z),phrase:o.phrase}),f))}}const m=(f,h)=>o?.actions[h]!==f;return l.$$set=f=>{"chord"in f&&s(0,o=f.chord)},[o,a,t,n,i,c,v,m]}class Ue extends ae{constructor(e){super(),ce(this,e,ot,lt,ie,{chord:0})}}function it(l){let e,s="restore_from_trash",n,o,r,a;return{c(){e=$("button"),e.textContent=s,this.h()},l(t){e=T(t,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-7lvlk3"&&(e.textContent=s),this.h()},h(){w(e,"class","icon compact")},m(t,i){A(t,e,i),o=!0,r||(a=K(e,"click",l[2]),r=!0)},p:j,i(t){o||(t&&ke(()=>{o&&(n||(n=re(e,pe,{},!0)),n.run(1))}),o=!0)},o(t){t&&(n||(n=re(e,pe,{},!1)),n.run(0)),o=!1},d(t){t&&d(e),t&&n&&n.end(),r=!1,a()}}}function at(l){let e,s="delete",n,o,r,a;return{c(){e=$("button"),e.textContent=s,this.h()},l(t){e=T(t,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-18t8q"&&(e.textContent=s),this.h()},h(){w(e,"class","icon compact")},m(t,i){A(t,e,i),o=!0,r||(a=K(e,"click",l[1]),r=!0)},p:j,i(t){o||(t&&ke(()=>{o&&(n||(n=re(e,pe,{},!0)),n.run(1))}),o=!0)},o(t){t&&(n||(n=re(e,pe,{},!1)),n.run(0)),o=!1},d(t){t&&d(e),t&&n&&n.end(),r=!1,a()}}}function ct(l){let e,s,n,o,r,a,t,i,c,v,m,f="undo",h,k,g,y,D="share",E,_,N;s=new Ue({props:{chord:l[0]}}),r=new nt({props:{chord:l[0]}});const P=[at,it],L=[];function b(u,p){return u[0].phrase.length!==0?0:u[0].phraseChanged?1:-1}return~(i=b(l))&&(c=L[i]=P[i](l)),{c(){e=$("th"),F(s.$$.fragment),n=M(),o=$("td"),F(r.$$.fragment),a=M(),t=$("td"),c&&c.c(),v=M(),m=$("button"),m.textContent=f,h=M(),k=$("div"),g=M(),y=$("button"),y.textContent=D,this.h()},l(u){e=T(u,"TH",{});var p=I(e);J(s.$$.fragment,p),p.forEach(d),n=U(u),o=T(u,"TD",{class:!0});var z=I(o);J(r.$$.fragment,z),z.forEach(d),a=U(u),t=T(u,"TD",{class:!0});var O=I(t);c&&c.l(O),v=U(O),m=T(O,"BUTTON",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-1keg9r3"&&(m.textContent=f),h=U(O),k=T(O,"DIV",{class:!0}),I(k).forEach(d),g=U(O),y=T(O,"BUTTON",{class:!0,"data-svelte-h":!0}),W(y)!=="svelte-1ooqupu"&&(y.textContent=D),O.forEach(d),this.h()},h(){w(o,"class","svelte-1dhtuxh"),w(m,"class","icon compact"),V(m,"disabled",l[0].isApplied),w(k,"class","separator svelte-1dhtuxh"),w(y,"class","icon compact"),w(t,"class","table-buttons svelte-1dhtuxh")},m(u,p){A(u,e,p),Q(s,e,null),A(u,n,p),A(u,o,p),Q(r,o,null),A(u,a,p),A(u,t,p),~i&&L[i].m(t,null),S(t,v),S(t,m),S(t,h),S(t,k),S(t,g),S(t,y),E=!0,_||(N=K(m,"click",l[2]),_=!0)},p(u,[p]){const z={};p&1&&(z.chord=u[0]),s.$set(z);const O={};p&1&&(O.chord=u[0]),r.$set(O);let Y=i;i=b(u),i===Y?~i&&L[i].p(u,p):(c&&(ne(),q(L[Y],1,1,()=>{L[Y]=null}),se()),~i?(c=L[i],c?c.p(u,p):(c=L[i]=P[i](u),c.c()),R(c,1),c.m(t,v)):c=null),(!E||p&1)&&V(m,"disabled",u[0].isApplied)},i(u){E||(R(s.$$.fragment,u),R(r.$$.fragment,u),R(c),E=!0)},o(u){q(s.$$.fragment,u),q(r.$$.fragment,u),q(c),E=!1},d(u){u&&(d(e),d(n),d(o),d(a),d(t)),X(s),X(r),~i&&L[i].d(),_=!1,N()}}}function ut(l,e){return l.actions.length===e.actions.length&&l.actions.every((s,n)=>s===e.actions[n])}function ft(l,e,s){let{chord:n}=e;function o(){le.update(a=>(a.push({type:oe.Chord,id:n.id,actions:n.actions,phrase:[]}),a))}function r(){le.update(a=>a.filter(t=>!(t.type===oe.Chord&&ut(t,n))))}return l.$$set=a=>{"chord"in a&&s(0,n=a.chord)},[n,o,r]}class ht extends ae{constructor(e){super(),ce(this,e,ft,ct,ie,{chord:0})}}function Ne(l,e,s){const n=l.slice();return n[20]=e[s][0],n}function dt(l){let e;return{c(){e=x("- / -")},l(s){e=ee(s,"- / -")},m(s,n){A(s,e,n)},p:j,d(s){s&&d(e)}}}function _t(l){let e=l[3]+1+"",s,n,o=l[5]+1+"",r;return{c(){s=x(e),n=x(" / "),r=x(o)},l(a){s=ee(a,e),n=ee(a," / "),r=ee(a,o)},m(a,t){A(a,s,t),A(a,n,t),A(a,r,t)},p(a,t){t&8&&e!==(e=a[3]+1+"")&&de(s,e),t&32&&o!==(o=a[5]+1+"")&&de(r,o)},d(a){a&&(d(s),d(n),d(r))}}}function Le(l){let e,s,n,o,r,a;return n=new Ue({}),n.$on("submit",l[14]),{c(){e=$("tr"),s=$("th"),F(n.$$.fragment),o=$("td"),r=$("td")},l(t){e=T(t,"TR",{});var i=I(e);s=T(i,"TH",{});var c=I(s);J(n.$$.fragment,c),c.forEach(d),o=T(i,"TD",{}),I(o).forEach(d),r=T(i,"TD",{}),I(r).forEach(d),i.forEach(d)},m(t,i){A(t,e,i),S(e,s),Q(n,s,null),S(e,o),S(e,r),a=!0},p:j,i(t){a||(R(n.$$.fragment,t),a=!0)},o(t){q(n.$$.fragment,t),a=!1},d(t){t&&d(e),X(n)}}}function pt(l){let e,s="No Results";return{c(){e=$("caption"),e.textContent=s,this.h()},l(n){e=T(n,"CAPTION",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-b5pbjt"&&(e.textContent=s),this.h()},h(){w(e,"class","svelte-nxhahq")},m(n,o){A(n,e,o)},p:j,i:j,o:j,d(n){n&&d(e)}}}function mt(l){let e=[],s=new Map,n,o,r=_e(l[0].slice(l[3]*l[6]-(l[3]===0?0:1),(l[3]+1)*l[6]-1));const a=t=>JSON.stringify(t[20].id);for(let t=0;t<r.length;t+=1){let i=Ne(l,r,t),c=a(i);s.set(c,e[t]=Pe(c,i))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=te()},l(t){for(let i=0;i<e.length;i+=1)e[i].l(t);n=te()},m(t,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,i);A(t,n,i),o=!0},p(t,i){i&73&&(r=_e(t[0].slice(t[3]*t[6]-(t[3]===0?0:1),(t[3]+1)*t[6]-1)),ne(),e=Re(e,i,a,1,t,r,s,n.parentNode,qe,Pe,n,Ne),se())},i(t){if(!o){for(let i=0;i<r.length;i+=1)R(e[i]);o=!0}},o(t){for(let i=0;i<e.length;i+=1)q(e[i]);o=!1},d(t){t&&d(n);for(let i=0;i<e.length;i+=1)e[i].d(t)}}}function Pe(l,e){let s,n,o,r;return n=new ht({props:{chord:e[20]}}),{key:l,first:null,c(){s=$("tr"),F(n.$$.fragment),o=M(),this.h()},l(a){s=T(a,"TR",{});var t=I(s);J(n.$$.fragment,t),o=U(t),t.forEach(d),this.h()},h(){this.first=s},m(a,t){A(a,s,t),Q(n,s,null),S(s,o),r=!0},p(a,t){e=a;const i={};t&73&&(i.chord=e[20]),n.$set(i)},i(a){r||(R(n.$$.fragment,a),r=!0)},o(a){q(n.$$.fragment,a),r=!1},d(a){a&&d(s),X(n)}}}function gt(l){let e,s,n,o,r,a,t,i,c="navigate_before",v,m,f="navigate_next",h,k,g,y,D,E,_,N,P;function L(C,B){return C[5]!==-1?_t:dt}let b=L(l),u=b(l),p=l[3]===0&&Le(l);const z=[mt,pt],O=[];function Y(C,B){return C[5]!==-1?0:1}return D=Y(l),E=O[D]=z[D](l),{c(){e=M(),s=$("div"),n=$("input"),r=M(),a=$("div"),u.c(),t=M(),i=$("button"),i.textContent=c,v=M(),m=$("button"),m.textContent=f,h=M(),k=$("section"),g=$("table"),p&&p.c(),y=M(),E.c(),this.h()},l(C){ze("svelte-1cwk6hs",document.head).forEach(d),e=U(C),s=T(C,"DIV",{class:!0});var H=I(s);n=T(H,"INPUT",{type:!0,placeholder:!0,class:!0}),r=U(H),a=T(H,"DIV",{class:!0});var ue=I(a);u.l(ue),ue.forEach(d),t=U(H),i=T(H,"BUTTON",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-18qb9j7"&&(i.textContent=c),v=U(H),m=T(H,"BUTTON",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-wgltnv"&&(m.textContent=f),H.forEach(d),h=U(C),k=T(C,"SECTION",{class:!0});var ve=I(k);g=T(ve,"TABLE",{class:!0});var fe=I(g);p&&p.l(fe),y=U(fe),E.l(fe),fe.forEach(d),ve.forEach(d),this.h()},h(){document.title="Chord Manager",w(n,"type","search"),w(n,"placeholder",o=l[4].configure.chords.search.PLACEHOLDER(l[1].length)),w(n,"class","svelte-nxhahq"),w(a,"class","paginator svelte-nxhahq"),w(i,"class","icon"),w(m,"class","icon"),w(s,"class","search-container svelte-nxhahq"),w(g,"class","svelte-nxhahq"),w(k,"class","svelte-nxhahq")},m(C,B){A(C,e,B),A(C,s,B),S(s,n),S(s,r),S(s,a),u.m(a,null),S(s,t),S(s,i),S(s,v),S(s,m),A(C,h,B),A(C,k,B),S(k,g),p&&p.m(g,null),S(g,y),O[D].m(g,null),l[15](k),_=!0,N||(P=[K(n,"input",l[8]),K(i,"click",l[12]),Ce($e.call(null,i,{shortcut:"ctrl+left"})),K(m,"click",l[13]),Ce($e.call(null,m,{shortcut:"ctrl+right"}))],N=!0)},p(C,[B]){(!_||B&18&&o!==(o=C[4].configure.chords.search.PLACEHOLDER(C[1].length)))&&w(n,"placeholder",o),b===(b=L(C))&&u?u.p(C,B):(u.d(1),u=b(C),u&&(u.c(),u.m(a,null))),C[3]===0?p?(p.p(C,B),B&8&&R(p,1)):(p=Le(C),p.c(),R(p,1),p.m(g,y)):p&&(ne(),q(p,1,1,()=>{p=null}),se());let H=D;D=Y(C),D===H?O[D].p(C,B):(ne(),q(O[H],1,1,()=>{O[H]=null}),se(),E=O[D],E?E.p(C,B):(E=O[D]=z[D](C),E.c()),R(E,1),E.m(g,null))},i(C){_||(R(p),R(E),_=!0)},o(C){q(p),q(E),_=!1},d(C){C&&(d(e),d(s),d(h),d(k)),u.d(),p&&p.d(),O[D].d(),l[15](null),N=!1,be(P)}}}const Ie=38;function bt(l,e,s){let n,o,r,a,t,i;G(l,Te,b=>s(1,r=b)),G(l,Be,b=>s(4,a=b));let c;const v=Se(0);G(l,v,b=>s(6,i=b));let m;Ke(()=>{m=new ResizeObserver(()=>{v.set(Math.floor(c.clientHeight/Ie))}),v.set(Math.floor(c.clientHeight/Ie)),m.observe(c)}),Ve(()=>{m?.disconnect()});function f(b){const u=new Fe({tokenize:"full"});return b.forEach((p,z)=>{"phrase"in p&&u.add(z,p.phrase.map(O=>We[O].id).join(""))}),u}const h=Se(void 0);function k(b){const u=b.target.value;h.set(u&&n?n.search(u):void 0)}function g(b){le.update(u=>(u.push({type:oe.Chord,id:b,actions:b,phrase:[]}),u))}const y=we([h,Te],([b,u])=>b?.map(p=>[u[p],p])??u.map((p,z)=>[p,z]));G(l,y,b=>s(0,o=b));const D=we([y,v],([b,u])=>Math.ceil((b.length+1)/u)-1);G(l,D,b=>s(5,t=b)),je("cursor-crossfade",Je({}));let E=0;const _=()=>s(3,E=Math.max(E-1,0)),N=()=>s(3,E=Math.min(E+1,t)),P=({detail:b})=>g(b);function L(b){me[b?"unshift":"push"](()=>{c=b,s(2,c)})}return l.$$.update=()=>{l.$$.dirty&2&&(n=r?.length>0?f(r):void 0),l.$$.dirty&1&&s(3,E=0)},[o,r,c,E,a,t,i,v,k,g,y,D,_,N,P,L]}class Ot extends ae{constructor(e){super(),ce(this,e,bt,gt,ie,{})}}export{Ot as component};
